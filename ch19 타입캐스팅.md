# 타입캐스팅
### chapter19. 타입캐스팅
스위프트에는 데이터 타입 안전을 위해 각기 다른 타입끼리의 값 교환은 엄격히 제한한다.

스위프트에서는 타입 변환 혹은 타입캐스팅이라고 칭하지 않는다. 기존 값을 전달인자로 받는 이니셜라이저를 통해 새로운 Int 구조체의 인스턴스를 생성한다. 이니셜라이저를 통해 새로운 인스턴스를 생성하는 과정이다.

### chapter19.2 스위프트 타입캐스팅
스위프트에서는 다른 언어의 타입 변환 혹은 타입캐스팅을 이니셜라이저로 단순화 했다. 스위프트에서의 타입캐스팅은 있지만 조금 다른 의미로 사용한다. 

타입캐스팅이란 ? 인스턴스의 타입을 확인하거나 자신을 다린 타입의 인스턴스인양 행세할 수 있는 방법으로 사용할 수 있다.
### chapter19.3 데이터 타입 확인
타입 확인 연산자인 is 를 사용해서 인스턴스가 어떤 클래스(혹은 어떤 클래스의 자식클래스)의 인스턴스인지 타입을 확인해볼 수 있다. 타입 확인 연산자는 인스턴스가 해당 클래스의 인스턴스거나 그 자식클래스의 인스턴스라면 true를 반환하고, 그렇지 않다면 false를 반환하는데, is 연산자는 클래스의 인스턴스 뿐만 아니라 모든 데이터 타입에 사용할 수 있다. is 연산자 외에도 타입을 확인해볼 수 있는 방법이 있다. 메타 타입 타입을 이용하는것이다

메타 타입 타입은 타입의 타입을 뜻하는데, 클래스 타입, 구조체 타입, 열거형 타입, 프로토콜 타입 등의 타입의 타입입니다. 즉 타입 자체가 하나의 타입으로 또 표현할 수 있다는 것입니다. 

클래스, 구조체, 열거형의 이름은 타입의 이름이다. 그 타입의 이름 뒤에 .Type 을 붙이면 메타타입임을 나타낸다. self 를 이용해서 타입을 값처럼 표현할 수 있는데 ex) SomeClass.self 라고 표현하면 SomeClass 의 인스턴스가 아니라 SomeClass 타입을 값처럼 표현한 값을 반환한다.

만약 프로그램 실행중에 인스턴스의 타입을 표현한 값을 알아보고자 한다면 type(:of) 함수를 사용한다. 그래서 type(of: someInstance).self 라고 표현하면 someInstance 의 타입을 값으로 표현한 값을 반환한다.

    .self 표현은 값 뒤에 써주면 그 값 자신을, 타입 이름 뒤에 써주면 타입을 표현하는 값을 반환한다. "stringValue".self 는 "stringValue" 그 자체를, String.self 는 String 타입을 나타내는 값입니다.
    
### chapter19.4 다운캐스팅
다운캐스팅이란 ? 클래스의 상속 모식도에서 자식클래스보다 더 상위에 있는 부모클래스의 타입을 자식클래스의 타입으로 캐스팅한다고 해서 다운캐스팅이라고 부른다.

타입캐스팅의 연산자는 ? 와 ! 두가지가 있는데, 다운 캐스팅은 실패의 여지가 충분히 있기 때문에 연산자를 쓴다. 다운캐스팅을 시도해보는 조건부 연산자 as? 연산자는 다운캐스팅이 실패했을 경우 nil 을 반환하고, 다운캐스팅을 강제하는 as! 연산자는 다운캐스팅에 실패할 경우 런타임 오류가 발생한다. -> as? 연산자는 반환 타입이 옵셔널이고, as! 연산자의 반환타입은 옵셔널이 아니다. 다운캐스팅이 성공할 경우 인스턴스가 반환된다. (옵셔널이거나 아니거나.) 컴파일러가 다운캐스팅을 확실할 수 있는 경우에는 as? 나 as! 대신 as 를 사용할 수도 있습니다.

### chapter19.5 Any, AnyObject의 타입캐스팅
스위프트에는 특정 타입을 지정하지 않고 여러 타입의 값을 할당할 수 있는 Any와 AnyObject 라는 특별한 타입이 있음. Any 는 함수 타입을 포함한 모든 타입을 뜻하고, AnyObject는 클래스 타입만을 뜻한다. (예끼치못한 오류가 발생할 확률이 높아지므로 되도록이면 사용을 지양하는 것이 좋음.)

API를 통해 어떤 타입의 데이터라도 전달할 수 있다는 의미로 해석해볼 수 있습니다. 그런데 문제는 반환되는 타입도 Any 나 AnyObject 라면 전달받은 데이터가 어떤 타입인지 확인하고 사용해야 한다.(스위프트는 암시적 타입 변환을 허용하지 않음.)

AnyObject 는 클래스의 인스턴스만 취할 수 있는 반면, Any 함수, 구조체, 클래스, 열거형 등 모든 타입의 인스턴스를 취할 수 있다.

