# 함수형 프로그래밍과 스위프트
### chapter13. 클로저(closure)
클로저 : 일정 기능을 하는 코드를 하나의 블록으로 모아 놓은 것.(함수라고 편하게 생각) 변수나 상수가 선언된 위치에서 참조를 하고 획득할 수 있는데, 이를 클로징이라고 한다. (C언어의 람다식과 비슷한 표현)

클로저의 형태
- 이름이 있으면서 어떤 값도 획득하지 않는 전역함수의 형태
- 이름이 있으면서 다른 함수 내부의 값을 획득할 수 있는 중첩된 함수의 형태
- 이름이 없고 주변 문맥에 따라 값을 획득할 수 있는 축약 문법으로 작성한 형태

클로저의 표현
- 클로저는 매개변수와 반환 값의 타입을 문맥을 통해 유추할 수 있기 때문에 매개변수와 반환 값의 타입이 생략할 수 있다.
- 클로저에 단 한 줄의 표현만 들어있다면 암시적으로 이를 반환 값으로 취급한다.
- 축약된 전달인자 이름을 사용할 수 있다.
- 후행 클로저 문법을 사용할 수 있다.

sorted(by: ) : (배열의 타입과 같은 두 개의 매개변수를 가지며 Bool 타입을 반환하는) 클로저를 전달인자로 받을 수 있다.

후행클로저는 맨 마지막 전달인자로 전달되는 클로저에만 해당되므로, 전달인자로 클로저 여러 개를 전달할 때는 맨 마지막 클로저만 후행 클로저로 사용될 수 있다. 매개변수가 여러 개 있는 경우, 중괄호를 닫음으로써, 첫번째 클로저의 전달인자 레이블은 생략된다. 그래서 언제 쓰냐. 클로저가 조금 길어지거나, 가독성이 조금 떨어진다 싶으면 사용.

클로저의 표현을 줄이고 줄이다 
let reversed6: [String] = names.sorted {$0 > $1} 전달인자를 넣지 않아도, 리턴을 넣지 않아도 알아서 인식한다.

### chapter13.4 캡쳐값 
클로저는 자신이 정의된 위치의 주변 문맥을 통해 상수나 변수를 획득 할 수 있다. 값 획득을 통해 클로저는 주변에 정의한 상수나 변수가 더 이상 존재하지 않더라도 해당 상수나 변수의 값을 자신 내부에서 참조하거나 수정.

### chapter13.6
탈출 클로저는 비동기 작업에서 많이 사용. 클로저를 통해 비동기 콜백을 작성하는 경우, 현재 상태를 미리 획득해두지 않으면, 실제로 클로저의 기능을 실행하는 순간에는 주변의 상수나 변수가 이미 메모리에 존재하지 않는 경우가 발생.



탈출 클로저(escaping closure)는 함수의 매개변수로 전달된 클로저가 함수가 리턴된 후에 호출되는 경우를 의미. 기본적으로 함수의 인자로 전달된 클로저가 함수 내에서 실행되어야 한다. 탈출하는 클로저에서는 값 획득을 위해 self 키워드를 사용하여 프로퍼티에 접근해야한다. 어쩔 때 사용되나. 주로 비동기 작업을 할때 쓴다.


withoutActuallyEscaping : 비탈출클로저로 전달한 클로저가 탈출 클로저인척 해야하는 경우 사용된다.


자동클로저 : 함수의 전달인자로 전달하는 표현을 자동으로 변환해주는 클로저로 전달인자를 받지 않는다. 호출되었을 때 자신이 감싸고 있는 코드의 결괏값을 반환. 표기. @autoclosure 는 @noescape 속성을 포함하는데 만약 자동클로저를 탈출클로저로 사용하고 싶다면 @autoclosure @escaping 처럼 사용하면 된다. 어쩔 때 사용되나. 실제 계산이 필요할때 호출이 되기 때문에 계산이 복잡한 연산을 하는데 유용하다.
